language: bash
os: Linux
virt: vm


env:
  global:
  ### GITHUB_TOKEN ###
  - secure: pSEXbsq/p6JAG0Y3LNDfr7hJbUKJOWUUJt5OsoHKAK2bcc/xP4j5eXsbeGsE8Een/PGLQ7pUdKaz/Cj1hpWth24hDWxnDIl7WdCI763EcO/WcTYQRN/h0WEVEnBn4R2Sv1CI/R71rXvFgFaz8AJtzVjxvLi60KKUdCsf2famxofR2gPlBxVmyd55sEGakG/fln3SHzI98BHriOGGFurysHp8eCJ7mGh1HwbJMO/X0EljCTOI7R6CRW7j4iK4x0DS2Mhi2mX0Kyv1EHscOEh6Y48gk36yYhT85ozl3fiFOSTauHcIVoRGYlGSJ6bEykiZVmv7l8wyyFGrR7wCx9VWD1J1keDapQ3IpnCaB6AEBBI6E8NennoAZn9a3cvS70hTmK/65BZKrsxsyCkV1MvFaL+HfjFPKiDAUspAHbsieFoUPdgA/GNV70tJaP3LFdFn44m6v/JZbshOOaeAHzrPqmtI7u+3qmlR9imrNsj1fdJ0fIWd5UpqE4uAXm+XiTf7Bf9/l2qOQrh3cUViE5PqI277uclmRenJOPXoez5SpIBCxK/xcwk40TncHpRNHA0YBp5W4LyLgcdV2aCOZvKgX/KkRamWvMyZift9Mxro/VfeFGVBAYo9ex0PXz/oi+jHbcputWwlN4Az4qFXv/v0eVwISuZT2Niz3fNjQAVXhE0=
  ### DEPLOY_TOKEN ###
  - secure: qbqQY66cvdbgVAsMYePDiBE6GQkNFZyud8QhQ5y4t9tnP1bN5cbkNp8cN0b6PMREjDic1XjDX73hI5hoMAYvdmjgmpmf31u5Q1EC7Wmo1NCoxIB6h080WquHpsQ0OfcGtlJZ+NAtTBAdV64aeuFnwSkDq6uSN+cQXnOFjrD96bqA6TDFB6jqhaq0TKmsV9q04THkKFpZWYOP/qIvzZ3ef0BDb8YYU0gdeBy024iQkX6JCLkGTojHePCJnOzU7me6N0KXRrsicwRStx6hcLtqUWeVfB/4Xmd75dOu64PYy4rxDjflFJHwEOQcte4i0mDH0mWalbJDVDmiWlPGOyTr224M3NKvlfLqi90Dk/HqeyVEe0ljNPDGzkYRf9lqinA6O3Xxe1nlNxzrzCNWDt/PacTU3HGp224Jp/rS2pD2cV8oqLDky6OrGuU+5yVDaPxuuLUQ4VirtE0G5Z0rQermTbrnbjsdPq/kOZqrpuoYPF0fv7994hLhR0dq4bi/XWXes00hkljRWb8xY13wjfchPrahnFgMlXwhz9YmDRGb3qG0Aq4D3TlpYGAousX1hjqjRgz2xCCCwsWI5JgUUh1UrACiV2CV1dJI1YnLzbzum8Vi+LDHx+RqlqPGzqd9h8WMJHQWeyadJt84MknE4IgN25K3wdtYSbeFV3r/tljELIY=

jobs:
  include:
    - stage: "Tests"
      name:  "Unit Tests"
        run:
          skip_cleanup: true
          - git.checkout
      #install: skip
      #script:
          - store_test_results

      #script:
      #- bash dl_atom.sh
      #name: "Integration Tests"
      #install: skip
      #- store_test_results

    - stage: "Install"
      name:  "Install Stage"
      #- bash echo STAGE INSTALL
        #steps:
          #- download:
          #  name: "Download Stage"
            #command: |
          #rvm $(travis_internal_ruby) --fuzzy do ruby -S gem install what_you_mean
          #rvm $(travis_internal_ruby) --fuzzy do ruby -S gem install jekyll
          #sudo bash -c "wget https://api.travis-ci.com/repos/wryyyyyyyy/pages_template/builds.atom -O ./docs/_site/atom.xml"
          #sudo bash -c "wget https://api.travis-ci.com/v3/job/469819835/log.txt -O ./docs/_site/log.txt"
          #rvm $(travis_internal_ruby) --fuzzy do ruby -S gem update



          #- prepare:
           # name: "Prepare Stage"
            #command: |
             # sudo bash -c "wget -oQ- https://api.travis-ci.com/repos/wryyyyyyyy/pages_template/builds.atom"



    - stage: "Build"
      name:  "Build Stage"
        #steps:
          #run:
            #name: Build runner
            #command: sudo bash -c "cat ./docs/_site/log.txt"
             # bash dl_atom.sh
            #name: Phase 2
            #command: sudo bash -c "cat ./docs/_site/atom.xml"

    - stage: "Deploy"
      name:  "Deploy to HUB"

        #steps:
      #skip_cleanup: true
      #script: ./deploy.sh
          #- sudo bash -c "bash build.sh"
      deploy:
        provider: pages
        skip_cleanup: true
        github_token: "$GITHUB_TOKEN"
        keep_history: true
        target_branch: gh-pages

          #steps:
            #run:
              #name: Jekyll Build Stage
              #command: sudo bash -c "jekyll b --trace"
        #on:
          #branch: gh-pages
        on:
          branch: gh-pages

#install:
#- bash echo INSTALL
#- store_test_results
  #script:

#before_install:
#- bash echo BEFORE INSTALL
#- git.checkout
  #script:

#build:
  #script:
  #- bash echo STAGE BUILD


#before_build:
  #script:
  #- bash echo BEFORE BUILD
  #- store_test_results
#- sudo wget https://api.travis-ci.com/repos/wryyyyyyyy/pages_template/builds.atom -O ./docs/_includes/atom.tpl
#- sudo wget https://api.travis-ci.com/v3/job/469819835/log.txt -O ./docs/_includes/log.tpl
#- store_test_results

#deploy:
#  provider: pages
#  skip_cleanup: true
#  github_token: "$GITHUB_TOKEN"
#  keep_history: true
#  target_branch: gh-pages

#  script: bash dl_log.sh
#  script: bash dl_atom.sh
#  script: bash build.sh
  #script:
#  - sudo bash jekyll b --trace
  #script:
#  - sudo bash build.sh



branches:
  only:
  - gh-pages
  - "/.*/"
